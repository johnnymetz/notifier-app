setup:
  addons:
    - plan: cloudamqp:lemur
build:
  docker:
    api: api/Dockerfile
    celeryworker: api/Dockerfile
    # celerybeat: api/Dockerfile
run:
  # https://devcenter.heroku.com/articles/process-model
  web:
    command:
      - gunicorn api.wsgi:application --bind=0.0.0.0:$PORT
    image: api
  worker:
    command:
      - celery worker -A api -l info
    image: celeryworker
  # celerybeat:
  #   command:
  #     - celery beat -A api -l info --scheduler django_celery_beat.schedulers:DatabaseScheduler
  #   image: celerybeat
